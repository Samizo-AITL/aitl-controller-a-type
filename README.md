# Samizo-Lab AITL Controller (A-type)

A lightweight educational implementation of the **AITL three-layer control architecture**:

```
Inner Loop : PID Controller  
Middle Loop: FSM (Finite State Machine)  
Outer Loop: LLM (Adaptive Gain Adjustment, A-type)
```

This project demonstrates a **clear and modular control-design methodology**,  
rather than achieving perfectly optimized response characteristics.

---

## ğŸ”— Links

| Language | GitHub Pages ğŸŒ | GitHub ğŸ’» |
|----------|----------------|-----------|
| ğŸ‡ºğŸ‡¸ English | [![GitHub Pages EN](https://img.shields.io/badge/GitHub%20Pages-English-brightgreen?logo=github)](https://samizo-aitl.github.io/aitl-controller-a-type/) | [![GitHub Repo EN](https://img.shields.io/badge/GitHub-English-blue?logo=github)](https://github.com/Samizo-AITL/aitl-controller-a-type/tree/main) |

[![Back to Samizo-AITL Portal](https://img.shields.io/badge/Back%20to%20Samizo--AITL%20Portal-brightgreen)](https://samizo-aitl.github.io) 

---

# ğŸ“Š Demo Result â€” AITL Full Demo (Ideal)

This figure is generated by:

```
demos/05_aitl_full_demo.py
```

### â–¶ **Full AITL Ideal Output**

<img
  src="https://samizo-aitl.github.io/aitl-controller-a-type/data/aitl_full_demo_ideal.png"
  alt="AITL Full Demo Ideal"
  style="display:block; margin:1.5rem auto; width:80%; max-width:100%;"
/>

---

# ğŸ“„ Technical Document (PDF)

ğŸ‘‰ **[paper.pdf](paper.pdf)**

---

# ğŸ§± 1. Project Structure

```
AITL-CONTROLLER-A-TYPE/
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”œâ”€â”€ pid.py
â”‚   â”‚   â”œâ”€â”€ fsm.py
â”‚   â”‚   â”œâ”€â”€ hybrid.py
â”‚   â”‚
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ llm.py
â”‚   â”‚
â”‚   â””â”€â”€ core/
â”‚       â””â”€â”€ base.py
â”‚
â”œâ”€â”€ demos/
â”‚   â”œâ”€â”€ 01_pid_step_response.py
â”‚   â”œâ”€â”€ 02_fsm_mode_switch.py
â”‚   â”œâ”€â”€ 03_hybrid_pid_fsm_demo.py
â”‚   â”œâ”€â”€ 04_hybrid_fsm_llm_demo.py
â”‚   â”œâ”€â”€ 05_aitl_full_demo.py
â”‚   â”‚
â”‚   â”œâ”€â”€ 12_vi_current_control_sales_demo.py
â”‚   â”‚   â””â”€ Vâ€“I current control comparison under aging & disturbance
â”‚   â”œâ”€â”€ 13_aging_sweep_delta_t.py
â”‚   â”‚   â””â”€ reliability metrics sweep (Î”t, max|e| vs aging)
â”‚   â””â”€â”€ 15_fsm_explainability_demo.py
â”‚       â””â”€ FSM explainability & audit-ready transition rationale
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ aitl_full_demo_ideal.png
â”‚   â”œâ”€â”€ aitl_full_demo_ideal.pdf
â”‚   â”‚
â”‚   â”œâ”€â”€ 12_vi_current_control_sales_demo.png
â”‚   â”‚   â””â”€ waveform comparison (Fixed PID / PIDÃ—FSM / AITL)
â”‚   â”œâ”€â”€ 13_aging_sweep_delta_t.png
â”‚   â”‚   â””â”€ quantitative reliability & safety metrics
â”‚   â””â”€â”€ 15_fsm_explainability_demo.png
â”‚       â””â”€ explainable FSM mode switching visualization
â”‚
â”œâ”€â”€ tests/
â”‚
â”œâ”€â”€ paper.pdf
â””â”€â”€ README.md
```

---

# âš™ï¸ 2. AITL Architecture Overview

## **2.1 PID Layer**
- variable sampling period `dt`
- integral & derivative reset
- normal / high-response gain profiles

## **2.2 FSM Layer**
Switching logic:

```
normal â†’ high   (if |error| > threshold_high)  
high   â†’ normal (if |error| < threshold_low)
```

Provides explainable control-mode transitions.

## **2.3 LLM Layer (A-type)**
- adjusts **kp only** when in high state  
- deterministic and interpretable  
- educational, not predictive  

---

# ğŸ® 3. Included Demos

| Script | Description |
|--------|-------------|
| `01_pid_step_response.py` | Basic PID response (baseline behavior) |
| `02_fsm_mode_switch.py` | FSM threshold-based mode switching |
| `03_hybrid_pid_fsm_demo.py` | PID Ã— FSM hybrid control |
| `04_hybrid_fsm_llm_demo.py` | Hybrid control with LLM-based gain adjustment |
| `05_aitl_full_demo.py` | Full AITL joint system (ideal condition demo) |
|  |  |
| `12_vi_current_control_sales_demo.py` | Vâ€“I current control comparison under aging & disturbance (Fixed PID / PIDÃ—FSM / AITL) |
| `13_aging_sweep_delta_t.py` | Reliability metrics sweep vs aging (Î”t, maxã€€e) |
| `15_fsm_explainability_demo.py` | FSM explainability demo (why and when modes switched) |

**Note:**  
Demos `12`, `13`, and `15` provide **quantitative and explainable evidence**
supporting reliability-related design conclusions.

---

# ğŸƒ 4. Running the Main Demo

```
cd demos
python 05_aitl_full_demo.py
```

Output:

```
../data/aitl_full_demo_ideal.png
```

---

# ğŸ“ 5. Educational Value

- emphasizes architecture over tuning  
- interpretable adaptive behavior  
- visual understanding of switching control  
- suitable for teaching materials and research prototypes  

---

# ğŸš§ 6. Future Plans

- B-type AITL (self-optimization LLM)
- advanced FSM with multi-modes/hysteresis
- nonlinear plants
- RL-based adaptive tuning
- integration with AITL-H system

---

# ğŸ” 7. Reliability Investigation â€” Plant Aging

Beyond ideal conditions, the AITL controller was evaluated under
**severe long-term plant degradation** equivalent to **1000 days of friction aging**.

The focus is **not peak performance**, but **temporal reliability**:
whether response timing (Î”t) can be preserved as plant dynamics deviate
from nominal conditions.

### Representative Result (Aging Sweep)

<img
  src="https://samizo-aitl.github.io/aitl-controller-a-type/data/13_aging_sweep_delta_t.png"
  alt="Reliability metrics vs aging"
  style="display:block; margin:1.5rem auto; width:80%; max-width:100%;"
/>

**What this shows**
- Recovery time Î”t degrades with aging for all controllers
- AITL preserves timing better than fixed-gain PID in moderate aging
- Reliability limits become **explicit and quantifiable**

Detailed waveforms, metrics, and explainability analysis are documented separately.

ğŸ‘‰ **Full reliability analysis:**  
- [Reliability Analysis â€” AITL under Plant Aging](docs/reliability/)

---

## ğŸŸ¢ B-Type: Reliability-First AITL (Design Extension)

Based on the reliability investigation under plant aging,
a reliability-first architectural extension of AITL has been formulated.

This extension focuses not on performance optimization,
but on **deciding when adaptation should be restricted**.

ğŸ‘‰ **AITL Controller B-Type (Design Documentation)**  
- Reliability-first architecture  
- FSM-based adaptation guard  
â†’ [docs/b_type/](docs/b_type/)

---

## ğŸ›¡ï¸ True Robust Control â€” Operating Robustness as a Design Process

While A-Type demonstrates *adaptive capability*  
and B-Type enforces *reliability and responsibility*,

**True Robust Control** addresses a deeper question:

> **How should robustness itself be *operated*  
> before theoretical guarantees collapse?**

This theme extends the AITL framework by treating robustness  
not as a fixed design result, but as an **operational capability**.

---

### What Is Added Beyond A-Type and B-Type

True Robust Control introduces the following design concepts:

- **Uncertainty Î” as an observable state**, not a static worst-case bound
- **Frequency-aware interpretation of degradation**
  - low-frequency: performance degradation
  - high-frequency: stability margin loss
  - input-side: actuator stress and saturation
- **Proactive intervention at âˆ¥Î”âˆ¥âˆ â‰ˆ 0.8**,  
  before Hâˆ theoretical guarantees break
- **Selective redesign of Hâˆ weight functions**
  - \( W_s \): performance demand
  - \( W_t \): robustness margin
  - \( W_u \): actuator protection
- **Strict role separation**
  - FSM decides *when* to intervene
  - LLM decides *which design lever to move*
  - Controllers execute safely without reasoning

---

### Position Within the AITL Framework

| Layer | Primary Role |
|---|---|
| A-Type | Demonstrates adaptive capability |
| B-Type | Restricts adaptation for reliability |
| **True Robust Control** | **Operates robustness as a dynamic design process** |

> **A-Type asks:** Can the system adapt?  
> **B-Type asks:** Should the system adapt?  
> **True Robust Control asks:** How should robustness be operated?

These are **complementary layers**, not competing approaches.

---

### Documentation

ğŸ“˜ **True Robust Control â€” Design Documentation**  
â†’ [docs/true_robust_control/](docs/true_robust_control/)

This section is recommended when:
- Hâˆ control feels too static or overly conservative
- Plant degradation evolves over time
- Robustness decisions must be explainable and auditable
- Design intervention must occur *before* instability

---

# ğŸ‘¤ 8.ã€€Author

| ğŸ“Œ Item | Details |
|--------|---------|
| **Name** | Shinichi Samizo |
| **Expertise** | Semiconductor devices (logic, memory, high-voltage mixed-signal)<br>Thin-film piezo actuators for inkjet systems<br>PrecisionCore printhead productization, BOM management, ISO training |
| **GitHub** | [![GitHub](https://img.shields.io/badge/GitHub-Samizo--AITL-blue?style=for-the-badge&logo=github)](https://github.com/Samizo-AITL) |

---

# ğŸ“„ 9. License

[![Hybrid License](https://img.shields.io/badge/license-Hybrid-blueviolet)](https://samizo-aitl.github.io/aitl-contller-a-type//#-license)

| Item | License | Description |
|------|---------|-------------|
| **Source Code** | MIT | Free to use, modify, redistribute |
| **Text Materials** | CC BY 4.0 / CC BY-SA 4.0 | Attribution & share-alike rules |
| **Figures & Diagrams** | CC BY-NC 4.0 | Non-commercial use |
| **External References** | Original license applies | Cite properly |

---

# ğŸ’¬ 10.ã€€Feedback

> Suggestions, improvements, and discussions are welcome via GitHub Discussions.

[![ğŸ’¬ GitHub Discussions](https://img.shields.io/badge/ğŸ’¬%20GitHub-Discussions-brightgreen?logo=github)](https://github.com/Samizo-AITL/aitl-controller-a-type/discussions)



